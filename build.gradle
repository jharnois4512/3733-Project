/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.3.1/userguide/tutorial_java_projects.html
 */



buildscript {
    repositories {
        google()
        jcenter()
        mavenCentral()
        maven {
            url 'http://nexus.gluonhq.com/nexus/content/repositories/releases'
        }
    }
    dependencies {
        classpath 'org.javafxports:jfxmobile-plugin:2.0.20'
    }
}

plugins {
    // Apply the java plugin to add support for Java
    id 'java'
    // Apply the application plugin to add support for building an application
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.0.7'
}

tasks.withType(JavaExec) {
    jvmArgs = ['-Xms25g', '-Xmx25g', '-Xss16g']
}

wrapper {
    gradleVersion = '1.8'

    def jvmOpts = "-Xmx8192m"
    inputs.property("jvmOpts", jvmOpts)
    doLast {
        def optsEnvVar = "DEFAULT_JVM_OPTS"
        scriptFile.write scriptFile.text.replace("$optsEnvVar=\"\"", "$optsEnvVar=\"$jvmOpts\"")
        batchScript.write batchScript.text.replace("set $optsEnvVar=", "set $optsEnvVar=$jvmOpts")
    }
}

dependencies {
    implementation 'com.google.guava:guava:27.0.1-jre'
    implementation "org.openjfx:javafx-plugin:0.0.7"
    implementation group: 'org.apache.derby',name: 'derby',version: '10.14.2.0'
    implementation group: 'org.apache.derby',name: 'derbytools',version: '10.14.2.0'
    implementation 'com.jfoenix:jfoenix:8.0.8' // Java 8
    compile group: 'org.controlsfx', name: 'controlsfx', version: '8.0.5'

    implementation 'com.gluonhq:charm:5.0.2'
    implementation 'com.sendgrid:sendgrid-java:1.1.0'
    implementation group: 'com.twilio.sdk', name: 'twilio', version: '7.37.0'

    compile 'com.sendgrid:sendgrid-java:1.1.0'
    compile group: "com.twilio.sdk", name: "twilio", version: "7.37.0"
    compile group: 'org.controlsfx', name: 'controlsfx', version: '8.40.14'
// https://mvnrepository.com/artifact/com.github.sarxos/webcam-capture
    compile group: 'com.github.sarxos', name: 'webcam-capture', version: '0.3.4'
    compile group: 'com.github.sarxos', name: 'webcam-capture-driver-jmf', version: '0.3.11'

    // Use JUnit test framework
    //testImplementation 'junit:junit:4.12'
    //configurations.compile.extendsFrom(configurations.extraLibs)
}

repositories {
    google()
    jcenter()
    mavenCentral()
    maven {
        url 'http://nexus.gluonhq.com/nexus/content/repositories/releases'
    }
}

compileJava {
    options.warnings = false
    options.deprecation = false
    options.compilerArgs += ["-Xdoclint:none", "-Xlint:none", "-nowarn", "-XDstringConcat=inline", "-Xmx16000", "-Xms16000"]
    options.fork = true
    options.forkOptions.with {
        memoryMaximumSize = 32000
    }
}

apply plugin: "org.openjfx.javafxplugin"
apply plugin: 'org.javafxports.jfxmobile'

group 'edu.wpi.cs3733.d19.teamM'

javafx {
    modules = [ 'javafx.base', 'javafx.fxml', 'javafx.graphics', 'javafx.media','javafx.swing','javafx.web','javafx.controls' ]
}

/*configurations {
    extraLibs
}*/


sourceSets.main.java.srcDirs = ['src']
sourceSets.main.resources.srcDirs = ['src']

// Define the main class for the application
//mainClassName = 'edu.wpi.cs3733.d19.teamM.Main'

//create a single Jar with all dependencies
task fatJar(type: Jar) {
    manifest {
        attributes 'Main-Class': "edu.wpi.cs3733.d19.teamM.Main"
    }
    baseName = project.name + '-all'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}


jar {
    manifest {
        attributes(
                //'Class-Path': configurations.compile.collect { it.getName() }.join(' '),
                'Main-Class': "edu.wpi.cs3733.d19.teamM.Main"
        )
    }
    /*from {
        configurations.extraLibs.collect { it.isDirectory() ? it : zipTree(it) }
    }*/
}

mainClassName = 'edu.wpi.cs3733.d19.teamM.Main'


jfxmobile {
    downConfig {
        version = '3.6.0'
        // Do not edit the line below. Use Gluon Mobile Settings in your project context menu instead
        //plugins 'display', 'lifecycle', 'statusbar', 'storage'
    }
    android {
        manifest = 'src/android/AndroidManifest.xml'
    }
    ios {
        infoPList = file('src/ios/Default-Info.plist')
        forceLinkClasses = [
                'com.gluonhq.**.*',
                'javax.annotations.**.*',
                'javax.inject.**.*',
                'javax.json.**.*',
                'javafx.**.*',
                'org.glassfish.json.**.*'
        ]
    }
}